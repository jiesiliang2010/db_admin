(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e5c7b11a"],{"04bc":function(t,e,r){"use strict";r("8e6e"),r("456d");var n=r("bd86"),i=r("75fc"),o=(r("a481"),r("96cf"),r("3b8d")),s=(r("ac6a"),r("28a5"),r("9948")),a=r.n(s),c=r("9b02"),u=r.n(c),f=r("fc8b"),l=r("90fe"),d=r("24a0");function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(r,!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h,b,g={name:"LzForm",components:{FlexSpacer:d["a"]},inject:{view:{from:"view",default:null}},data:function(){return{loading:!1,stay:!1}},props:{getData:Function,submit:Function,errors:Object,form:Object,submitText:{type:String,default:"保存"},labelPosition:String,inDialog:Boolean,createdRedirect:{type:[String,Function],default:function(){var t=this.$route.path.split("/");return"/"+(t[t.length-2]||"")}},updatedRedirect:{type:[String,Function],default:function(){return this.$router.back.bind(this.$router)}},disableRedirect:Boolean,disableStay:Boolean,editMode:Boolean},computed:{realLabelPosition:function(){return this.labelPosition||(this.$store.state.miniWidth?"top":"right")},miniWidth:function(){return this.$store.state.miniWidth}},created:function(){this.copyMethods()},methods:{copyMethods:function(){var t=this;[f["default"].extends.methods,f["default"].methods].forEach((function(e){a()(e,(function(e,r){t[r]=function(){e.apply(this.$refs.form,arguments)}}))}))},_getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,this.view&&this.$emit("update:form",this.view.formBak),t.prev=2,t.t0=this.getData,!t.t0){t.next=7;break}return t.next=7,this.getData();case 7:this.$nextTick((function(){e.setInitialValues()})),t.next=13;break;case 10:t.prev=10,t.t1=t["catch"](2),Promise.reject(t.t1);case 13:this.loading=!1;case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$emit("update:errors",{}),t.prev=1,t.t0=this.submit,!t.t0){t.next=6;break}return t.next=6,this.submit();case 6:if(this.$message.success(Object(l["h"])(this.editMode?"updated":"created")),!this.stay&&!this.disableRedirect){t.next=9;break}return t.abrupt("return");case 9:e=this.editMode?this.updatedRedirect:this.createdRedirect,"string"===typeof e?this.$router.push(e):"function"===typeof e&&e(),t.next=17;break;case 13:t.prev=13,t.t1=t["catch"](1),this.$emit("update:errors",Object(l["j"])(t.t1.response)),422!==u()(t.t1,"response.status")&&Promise.reject(t.t1);case 17:case"end":return t.stop()}}),t,this,[[1,13]])})));function e(){return t.apply(this,arguments)}return e}(),onReset:function(){this.$refs.form.resetFields()}},watch:{$route:{handler:function(){this.$active&&this._getData()},immediate:!0}},render:function(t){var e=this,r=this.$slots.default;Array.isArray(r)&&(r=r.map((function(r){var n=r.componentOptions,o=n.propsData,s=o.helper,a=o.label;if(s){s=s.replace(/\n/g,"<br>");var c=t("template",{slot:"label"},[t("span",[a]),t("el-tooltip",{attrs:{effect:"dark",placement:"top-start","popper-class":"form-helper-popper ".concat(e.miniWidth?"mini-width":"")}},[t("div",{slot:"content",domProps:{innerHTML:s}}),t("i",{class:"ml-1 el-icon-question helper"})])]);return t("el-form-item",{props:n.propsData},[c].concat(Object(i["a"])(n.children)))}return r})));var n=!this.disableStay&&t("el-checkbox",{attrs:{title:"表单提交后，留在此页"},model:{value:e.stay,callback:function(t){e.stay=t}}},["留在此页"]),o=this.$slots.footer||t("el-form-item",{class:"footer"},[t("loading-action",{attrs:{type:"primary",action:this.onSubmit}},[this.submitText]),t("el-button",{on:{click:this.onReset}},["重置"]),this.$slots.footerAppend,t("flex-spacer"),n]);return t("el-form",{props:m({model:this.form,errors:this.errors,labelPosition:this.realLabelPosition},this.$attrs),on:m({},this.$listeners),class:{"in-dialog":this.inDialog},style:{width:this.inDialog?"auto":"800px"},directives:[{name:"loading",value:this.loading}],ref:"form"},[r,o])}},v=g,y=(r("98bf"),r("2070"),r("2877")),x=Object(y["a"])(v,h,b,!1,null,"c3fdf812",null);e["a"]=x.exports},2070:function(t,e,r){"use strict";var n=r("9016"),i=r.n(n);i.a},"32a7":function(t,e,r){},"5a6d":function(t,e,r){},"5bc9":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",{scopedSlots:t._u([{key:"header",fn:function(){return[r("content-header")]},proxy:!0}])},[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("lz-form",{ref:"form",attrs:{"get-data":t.getData,submit:t.onSubmit,form:t.form,errors:t.errors,"edit-mode":t.editMode},on:{"update:form":function(e){t.form=e},"update:errors":function(e){t.errors=e}}},[r("el-form-item",{attrs:{label:"标识",required:"",prop:"slug"}},[r("el-input",{model:{value:t.form.slug,callback:function(e){t.$set(t.form,"slug",e)},expression:"form.slug"}})],1),r("el-form-item",{attrs:{label:"名称",required:"",prop:"name"}},[r("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"权限",prop:"permissions"}},[r("el-transfer",{attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"搜索权限",titles:["待选","已选"],"button-texts":["移除","选择"],data:t.perms,props:{key:"id",label:"name"}},model:{value:t.form.permissions,callback:function(e){t.$set(t.form,"permissions",e)},expression:"form.permissions"}})],1)],1)],1)],1)},i=[],o=(r("7f7f"),r("96cf"),r("3b8d")),s=r("04bc"),a=r("fff0"),c=(r("aef5"),r("7a7f")),u={name:"Form",components:{LzForm:s["a"]},mixins:[c["a"]],data:function(){return{form:{slug:"",name:"",permissions:[]},errors:{},perms:[]}},methods:{getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.editMode){t.next=9;break}return t.next=3,Object(a["b"])(this.resourceId);case 3:r=t.sent,e=r.data,e.role.permissions=e.role.permissions.map((function(t){return t.id})),this.fillForm(e.role),t.next=13;break;case 9:return t.next=11,Object(a["a"])();case 11:n=t.sent,e=n.data;case 13:this.perms=e.permissions;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.editMode){t.next=5;break}return t.next=3,Object(a["e"])(this.resourceId,this.form);case 3:t.next=7;break;case 5:return t.next=7,Object(a["d"])(this.form);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filterMethod:function(t,e){return e.name.indexOf(t)>-1}}},f=u,l=(r("82fe"),r("2877")),d=Object(l["a"])(f,n,i,!1,null,"64dfca6e",null);e["default"]=d.exports},"7a7f":function(t,e,r){"use strict";var n=r("90fe");e["a"]={provide:function(){return{view:this}},data:function(){return{formField:"form",idField:"id"}},computed:{editMode:function(){return!!this.resourceId},resourceId:function(){return this.$route.params[this.idField]}},created:function(){this.backupForm()},methods:{getResourceId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return this.$route.params[t]},backupForm:function(){this.formBak=JSON.parse(JSON.stringify(this.$data[this.formField]))},fillForm:function(t){this.$data[this.formField]=Object(n["b"])(this.$data[this.formField],t)}}}},"82fe":function(t,e,r){"use strict";var n=r("32a7"),i=r.n(n);i.a},9016:function(t,e,r){},"98bf":function(t,e,r){"use strict";var n=r("5a6d"),i=r.n(n);i.a},aef5:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return s})),r.d(e,"a",(function(){return a}));var n=r("ff66");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("admin-permissions",{params:t})}function o(t){return n["b"].post("admin-permissions",t)}function s(t,e){return n["b"].put("admin-permissions/".concat(t),e)}function a(t){return n["b"].get("admin-permissions/".concat(t,"/edit"))}},fff0:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return s})),r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return c}));var n=r("ff66");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("admin-roles",{params:t})}function o(t){return n["b"].post("admin-roles",t)}function s(t,e){return n["b"].put("admin-roles/".concat(t),e)}function a(t){return n["b"].get("admin-roles/".concat(t,"/edit"))}function c(){return n["b"].get("admin-roles/create")}}}]);
//# sourceMappingURL=chunk-e5c7b11a.60809c5d.js.map