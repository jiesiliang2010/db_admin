(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e419592"],{"04bc":function(t,e,r){"use strict";r("8e6e"),r("456d");var a=r("bd86"),n=r("75fc"),i=(r("a481"),r("96cf"),r("3b8d")),o=(r("ac6a"),r("28a5"),r("9948")),s=r.n(o),c=r("9b02"),l=r.n(c),u=r("fc8b"),d=r("90fe"),p=r("24a0");function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(r,!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h,b,g={name:"LzForm",components:{FlexSpacer:p["a"]},inject:{view:{from:"view",default:null}},data:function(){return{loading:!1,stay:!1}},props:{getData:Function,submit:Function,errors:Object,form:Object,submitText:{type:String,default:"保存"},labelPosition:String,inDialog:Boolean,createdRedirect:{type:[String,Function],default:function(){var t=this.$route.path.split("/");return"/"+(t[t.length-2]||"")}},updatedRedirect:{type:[String,Function],default:function(){return this.$router.back.bind(this.$router)}},disableRedirect:Boolean,disableStay:Boolean,editMode:Boolean},computed:{realLabelPosition:function(){return this.labelPosition||(this.$store.state.miniWidth?"top":"right")},miniWidth:function(){return this.$store.state.miniWidth}},created:function(){this.copyMethods()},methods:{copyMethods:function(){var t=this;[u["default"].extends.methods,u["default"].methods].forEach((function(e){s()(e,(function(e,r){t[r]=function(){e.apply(this.$refs.form,arguments)}}))}))},_getData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,this.view&&this.$emit("update:form",this.view.formBak),t.prev=2,t.t0=this.getData,!t.t0){t.next=7;break}return t.next=7,this.getData();case 7:this.$nextTick((function(){e.setInitialValues()})),t.next=13;break;case 10:t.prev=10,t.t1=t["catch"](2),Promise.reject(t.t1);case 13:this.loading=!1;case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$emit("update:errors",{}),t.prev=1,t.t0=this.submit,!t.t0){t.next=6;break}return t.next=6,this.submit();case 6:if(this.$message.success(Object(d["h"])(this.editMode?"updated":"created")),!this.stay&&!this.disableRedirect){t.next=9;break}return t.abrupt("return");case 9:e=this.editMode?this.updatedRedirect:this.createdRedirect,"string"===typeof e?this.$router.push(e):"function"===typeof e&&e(),t.next=17;break;case 13:t.prev=13,t.t1=t["catch"](1),this.$emit("update:errors",Object(d["j"])(t.t1.response)),422!==l()(t.t1,"response.status")&&Promise.reject(t.t1);case 17:case"end":return t.stop()}}),t,this,[[1,13]])})));function e(){return t.apply(this,arguments)}return e}(),onReset:function(){this.$refs.form.resetFields()}},watch:{$route:{handler:function(){this.$active&&this._getData()},immediate:!0}},render:function(t){var e=this,r=this.$slots.default;Array.isArray(r)&&(r=r.map((function(r){var a=r.componentOptions,i=a.propsData,o=i.helper,s=i.label;if(o){o=o.replace(/\n/g,"<br>");var c=t("template",{slot:"label"},[t("span",[s]),t("el-tooltip",{attrs:{effect:"dark",placement:"top-start","popper-class":"form-helper-popper ".concat(e.miniWidth?"mini-width":"")}},[t("div",{slot:"content",domProps:{innerHTML:o}}),t("i",{class:"ml-1 el-icon-question helper"})])]);return t("el-form-item",{props:a.propsData},[c].concat(Object(n["a"])(a.children)))}return r})));var a=!this.disableStay&&t("el-checkbox",{attrs:{title:"表单提交后，留在此页"},model:{value:e.stay,callback:function(t){e.stay=t}}},["留在此页"]),i=this.$slots.footer||t("el-form-item",{class:"footer"},[t("loading-action",{attrs:{type:"primary",action:this.onSubmit}},[this.submitText]),t("el-button",{on:{click:this.onReset}},["重置"]),this.$slots.footerAppend,t("flex-spacer"),a]);return t("el-form",{props:m({model:this.form,errors:this.errors,labelPosition:this.realLabelPosition},this.$attrs),on:m({},this.$listeners),class:{"in-dialog":this.inDialog},style:{width:this.inDialog?"auto":"800px"},directives:[{name:"loading",value:this.loading}],ref:"form"},[r,i])}},v=g,y=(r("98bf"),r("2070"),r("2877")),w=Object(y["a"])(v,h,b,!1,null,"c3fdf812",null);e["a"]=w.exports},2070:function(t,e,r){"use strict";var a=r("9016"),n=r.n(a);n.a},"5a6d":function(t,e,r){},9016:function(t,e,r){},"98bf":function(t,e,r){"use strict";var a=r("5a6d"),n=r.n(a);n.a},"9e0a":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",{scopedSlots:t._u([{key:"header",fn:function(){return[r("content-header")]},proxy:!0}])},[r("el-button-group",{staticClass:"mb-3"},[r("search-form",{attrs:{fields:t.search}}),r("el-button",{on:{click:function(e){t.createDialog=!0}}},[t._v("添加")])],1),r("el-table",{attrs:{data:t.cates,resource:"config-categories"}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),r("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("input-edit",{attrs:{id:a.id,field:"name",update:t.updateConfigCategory},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"row.name"}})]}}])}),r("el-table-column",{attrs:{prop:"slug",label:"标识","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("input-edit",{attrs:{id:a.id,field:"slug",update:t.updateConfigCategory},model:{value:a.slug,callback:function(e){t.$set(a,"slug",e)},expression:"row.slug"}})]}}])}),r("el-table-column",{attrs:{prop:"created_at",label:"添加时间",width:"160"}}),r("el-table-column",{attrs:{prop:"updated_at",label:"修改时间",width:"160"}}),r("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("el-button-group",[r("button-link",{attrs:{size:"small",to:"/configs/create?category_id="+a.id}},[t._v("添加配置")]),r("button-link",{attrs:{size:"small",to:"/configs?category_id="+a.id}},[t._v("查看配置")]),r("row-destroy",{attrs:{notice:"分类下的所有配置都会被删除"}})],1)]}}])})],1),r("div",{staticClass:"card-footer"},[r("pagination",{attrs:{page:t.page}})],1),r("el-dialog",{attrs:{title:"添加分类",visible:t.createDialog,width:"400px","append-to-body":""},on:{"update:visible":function(e){t.createDialog=e}}},[r("lz-form",{ref:"form",staticStyle:{width:"auto"},attrs:{submit:t.onStoreCategory,errors:t.errors,form:t.form,"label-position":"top","in-dialog":"","disable-redirect":"","disable-stay":""},on:{"update:errors":function(e){t.errors=e},"update:form":function(e){t.form=e}}},[r("el-form-item",{attrs:{label:"名称",required:"",prop:"name"}},[r("el-input",{attrs:{autofocus:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"标识",required:"",prop:"slug"}},[r("el-input",{model:{value:t.form.slug,callback:function(e){t.$set(t.form,"slug",e)},expression:"form.slug"}})],1)],1)],1)],1)},n=[],i=(r("96cf"),r("3b8d")),o=r("38db"),s=r("1799"),c=r("4d2d"),l=r("76ab"),u=(r("90fe"),r("9139")),d=r("04bc"),p=r("d3fc"),f={name:"Index",components:{RowDestroy:p["a"],InputEdit:u["a"],ButtonLink:l["a"],SearchForm:o["a"],Pagination:s["a"],LzForm:d["a"]},data:function(){return{search:[{field:"name",label:"名称"},{field:"slug",label:"标识"}],cates:[],page:null,createDialog:!1,form:{name:"",slug:""},errors:{}}},methods:{onStoreCategory:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["i"])(this.form);case 2:e=t.sent,r=e.data,this.createDialog=!1,this.cates.unshift(r);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),updateConfigCategory:c["k"]},watch:{$route:{handler:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["c"])(e.query);case 2:r=t.sent,a=r.data,n=a.data,i=a.meta,this.cates=n,this.page=i;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),immediate:!0},createDialog:function(t){t||(this.form={name:"",slug:""})}}},m=f,h=r("2877"),b=Object(h["a"])(m,a,n,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-3e419592.908ec1a0.js.map