{"version":3,"sources":["webpack:///src/components/LzForm/index.vue","webpack:///./src/components/LzForm/index.vue","webpack:///./src/components/LzForm/index.vue?5874","webpack:///./src/components/LzForm/index.vue?5ebe","webpack:///./src/components/LzForm/index.vue?b316","webpack:///./src/views/config-categories/Index.vue?d4a3","webpack:///src/views/config-categories/Index.vue","webpack:///./src/views/config-categories/Index.vue?9133","webpack:///./src/views/config-categories/Index.vue"],"names":["staticRenderFns","name","components","FlexSpacer","inject","view","from","default","data","loading","stay","props","getData","Function","submit","errors","Object","form","submitText","type","String","labelPosition","inDialog","Boolean","createdRedirect","p","length","updatedRedirect","this","$router","back","bind","disableRedirect","disableStay","editMode","computed","realLabelPosition","$store","state","miniWidth","created","copyMethods","methods","Form","m","apply","$refs","arguments","onReset","resetFields","watch","$route","handler","$active","_getData","immediate","render","Array","isArray","defaultSlot","map","helper","replace","slot","h","options","propsData","formItem","model","on","class","style","width","directives","ref","component","_vm","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","proxy","staticClass","attrs","search","$event","createDialog","_v","cates","row","id","updateConfigCategory","value","callback","$$v","$set","expression","page","staticStyle","onStoreCategory","RowDestroy","InputEdit","ButtonLink","SearchForm","Pagination","LzForm","slug","newVal"],"mappings":"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","file":"js/chunk-3e419592.31c0ba7a.js","sourcesContent":["<script>\r\nimport _forIn from 'lodash/forIn'\r\nimport _get from 'lodash/get'\r\nimport Form from '@/plugins/element/components/Form'\r\nimport { getMessage, handleValidateErrors } from '@/libs/utils'\r\nimport FlexSpacer from '@c/FlexSpacer'\r\n\r\nexport default {\r\n  name: 'LzForm',\r\n  components: {\r\n    FlexSpacer,\r\n  },\r\n  inject: {\r\n    // 使用 FormHelper 混入，会自动提供该注入\r\n    view: {\r\n      from: 'view',\r\n      default: null,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      stay: false,\r\n    }\r\n  },\r\n  props: {\r\n    getData: Function,\r\n    submit: Function,\r\n    errors: Object,\r\n    form: Object,\r\n    submitText: {\r\n      type: String,\r\n      default: '保存',\r\n    },\r\n    labelPosition: String,\r\n    inDialog: Boolean,\r\n    createdRedirect: {\r\n      type: [String, Function],\r\n      default() {\r\n        const p = this.$route.path.split('/')\r\n        return '/' + (p[p.length - 2] || '')\r\n      },\r\n    },\r\n    updatedRedirect: {\r\n      type: [String, Function],\r\n      default() {\r\n        return this.$router.back.bind(this.$router)\r\n      },\r\n    },\r\n    disableRedirect: Boolean,\r\n    disableStay: Boolean,\r\n    editMode: Boolean,\r\n  },\r\n  computed: {\r\n    realLabelPosition() {\r\n      return this.labelPosition || (this.$store.state.miniWidth ? 'top' : 'right')\r\n    },\r\n    miniWidth() {\r\n      return this.$store.state.miniWidth\r\n    },\r\n  },\r\n  created() {\r\n    this.copyMethods()\r\n  },\r\n  methods: {\r\n    /**\r\n     * 复制实际 Form 组件的方法, 给外部调用, 并把 this 指向 ElForm 实例\r\n     */\r\n    copyMethods() {\r\n      // 原始 ElForm 和 重写的 Form\r\n      [Form.extends.methods, Form.methods].forEach(methods => {\r\n        _forIn(methods, (m, k) => {\r\n          this[k] = function () {\r\n            m.apply(this.$refs.form, arguments)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    async _getData() {\r\n      this.loading = true\r\n      this.view && this.$emit('update:form', this.view.formBak)\r\n\r\n      try {\r\n        this.getData && await this.getData()\r\n        // 在某些情况下，会出现方法未定义，所以放到 nextTick 中\r\n        this.$nextTick(() => {\r\n          this.setInitialValues()\r\n        })\r\n      } catch (e) {\r\n        Promise.reject(e)\r\n      }\r\n\r\n      this.loading = false\r\n    },\r\n    async onSubmit() {\r\n      this.$emit('update:errors', {})\r\n      try {\r\n        this.submit && await this.submit()\r\n\r\n        this.$message.success(getMessage(this.editMode ? 'updated' : 'created'))\r\n\r\n        if (this.stay || this.disableRedirect) {\r\n          return\r\n        }\r\n\r\n        let redirect = this.editMode ? this.updatedRedirect : this.createdRedirect\r\n        if (typeof redirect === 'string') {\r\n          this.$router.push(redirect)\r\n        } else if (typeof redirect === 'function') {\r\n          redirect()\r\n        }\r\n      } catch (e) {\r\n        this.$emit('update:errors', handleValidateErrors(e.response))\r\n        if (_get(e, 'response.status') !== 422) {\r\n          Promise.reject(e)\r\n        }\r\n      }\r\n    },\r\n    onReset() {\r\n      this.$refs.form.resetFields()\r\n    },\r\n  },\r\n  watch: {\r\n    $route: {\r\n      handler() {\r\n        this.$active && this._getData()\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n  render(h) {\r\n    let defaultSlot = this.$slots.default\r\n    if (Array.isArray(defaultSlot)) {\r\n      defaultSlot = defaultSlot.map((formItem) => {\r\n        const options = formItem.componentOptions\r\n\r\n        // 如果有 helper props，则生成一个新的 FormItem 替换掉原来的\r\n        let { helper, label } = options.propsData\r\n        if (helper) {\r\n          helper = helper.replace(/\\n/g, '<br>')\r\n          const labelSlot = h('template', {\r\n            slot: 'label',\r\n          }, [\r\n            (<span>{label}</span>),\r\n            (\r\n              <el-tooltip\r\n                effect=\"dark\"\r\n                placement=\"top-start\"\r\n                popper-class={`form-helper-popper ${this.miniWidth ? 'mini-width' : ''}`}\r\n              >\r\n                <div slot=\"content\" domPropsInnerHTML={helper}/>\r\n                <i class=\"ml-1 el-icon-question helper\"/>\r\n              </el-tooltip>\r\n            ),\r\n          ])\r\n          return h('el-form-item', {\r\n            props: options.propsData,\r\n          }, [labelSlot, ...options.children])\r\n        } else {\r\n          return formItem\r\n        }\r\n      })\r\n    }\r\n\r\n    const stayCheckbox = !this.disableStay && (\r\n      <el-checkbox\r\n        vModel={this.stay}\r\n        title=\"表单提交后，留在此页\"\r\n      >\r\n        留在此页\r\n      </el-checkbox>\r\n    )\r\n\r\n    const footerSlot = this.$slots.footer || (\r\n      <el-form-item class=\"footer\">\r\n        <loading-action type=\"primary\" action={this.onSubmit}>{this.submitText}</loading-action>\r\n        <el-button vOn:click={this.onReset}>重置</el-button>\r\n        {this.$slots.footerAppend}\r\n        <flex-spacer/>\r\n        {stayCheckbox}\r\n      </el-form-item>\r\n    )\r\n\r\n    // 用 jsx，ElForm 组件的 model props 传不进去，，，\r\n    return h('el-form', {\r\n      props: {\r\n        model: this.form,\r\n        errors: this.errors,\r\n        labelPosition: this.realLabelPosition,\r\n        ...this.$attrs,\r\n      },\r\n      on: {\r\n        ...this.$listeners,\r\n      },\r\n      class: {\r\n        'in-dialog': this.inDialog,\r\n      },\r\n      style: {\r\n        width: this.inDialog ? 'auto' : '800px',\r\n      },\r\n      directives: [\r\n        {\r\n          name: 'loading',\r\n          value: this.loading,\r\n        },\r\n      ],\r\n      ref: 'form',\r\n    }, [defaultSlot, footerSlot])\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '~element-ui/packages/theme-chalk/src/common/var';\r\n\r\n.footer {\r\n  ::v-deep {\r\n    .el-form-item__content {\r\n      display: flex;\r\n    }\r\n  }\r\n}\r\n\r\n.in-dialog {\r\n  .footer {\r\n    text-align: right;\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n\r\n.helper {\r\n  color: $--color-primary;\r\n  border: 2px solid transparent;\r\n  border-radius: 50%;\r\n  transition: border-color .3s;\r\n\r\n  &:hover {\r\n    border-color: $--color-primary-light-1;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.form-helper-popper {\r\n  max-width: 400px;\r\n\r\n  &.mini-width {\r\n    max-width: 90%;\r\n  }\r\n}\r\n</style>\r\n","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=c3fdf812&scoped=true&lang=scss&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c3fdf812\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=c3fdf812&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=c3fdf812&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('content-header')]},proxy:true}])},[_c('el-button-group',{staticClass:\"mb-3\"},[_c('search-form',{attrs:{\"fields\":_vm.search}}),_c('el-button',{on:{\"click\":function($event){_vm.createDialog = true}}},[_vm._v(\"添加\")])],1),_c('el-table',{attrs:{\"data\":_vm.cates,\"resource\":\"config-categories\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"60\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"min-width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('input-edit',{attrs:{\"id\":row.id,\"field\":\"name\",\"update\":_vm.updateConfigCategory},model:{value:(row.name),callback:function ($$v) {_vm.$set(row, \"name\", $$v)},expression:\"row.name\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"slug\",\"label\":\"标识\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('input-edit',{attrs:{\"id\":row.id,\"field\":\"slug\",\"update\":_vm.updateConfigCategory},model:{value:(row.slug),callback:function ($$v) {_vm.$set(row, \"slug\", $$v)},expression:\"row.slug\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"created_at\",\"label\":\"添加时间\",\"width\":\"160\"}}),_c('el-table-column',{attrs:{\"prop\":\"updated_at\",\"label\":\"修改时间\",\"width\":\"160\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"240\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('el-button-group',[_c('button-link',{attrs:{\"size\":\"small\",\"to\":(\"/configs/create?category_id=\" + (row.id))}},[_vm._v(\"添加配置\")]),_c('button-link',{attrs:{\"size\":\"small\",\"to\":(\"/configs?category_id=\" + (row.id))}},[_vm._v(\"查看配置\")]),_c('row-destroy',{attrs:{\"notice\":\"分类下的所有配置都会被删除\"}})],1)]}}])})],1),_c('div',{staticClass:\"card-footer\"},[_c('pagination',{attrs:{\"page\":_vm.page}})],1),_c('el-dialog',{attrs:{\"title\":\"添加分类\",\"visible\":_vm.createDialog,\"width\":\"400px\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.createDialog=$event}}},[_c('lz-form',{ref:\"form\",staticStyle:{\"width\":\"auto\"},attrs:{\"submit\":_vm.onStoreCategory,\"errors\":_vm.errors,\"form\":_vm.form,\"label-position\":\"top\",\"in-dialog\":\"\",\"disable-redirect\":\"\",\"disable-stay\":\"\"},on:{\"update:errors\":function($event){_vm.errors=$event},\"update:form\":function($event){_vm.form=$event}}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"required\":\"\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"autofocus\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"标识\",\"required\":\"\",\"prop\":\"slug\"}},[_c('el-input',{model:{value:(_vm.form.slug),callback:function ($$v) {_vm.$set(_vm.form, \"slug\", $$v)},expression:\"form.slug\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card>\r\n    <template #header>\r\n      <content-header/>\r\n    </template>\r\n\r\n    <el-button-group class=\"mb-3\">\r\n      <search-form :fields=\"search\"/>\r\n      <el-button @click=\"createDialog = true\">添加</el-button>\r\n    </el-button-group>\r\n\r\n    <el-table :data=\"cates\" resource=\"config-categories\">\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"60\"/>\r\n      <el-table-column prop=\"name\" label=\"名称\" min-width=\"180\">\r\n        <template #default=\"{ row }\">\r\n          <input-edit\r\n            :id=\"row.id\"\r\n            field=\"name\"\r\n            :update=\"updateConfigCategory\"\r\n            v-model=\"row.name\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"slug\" label=\"标识\" min-width=\"150\">\r\n        <template #default=\"{ row }\">\r\n          <input-edit\r\n            :id=\"row.id\"\r\n            field=\"slug\"\r\n            :update=\"updateConfigCategory\"\r\n            v-model=\"row.slug\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"created_at\" label=\"添加时间\" width=\"160\"/>\r\n      <el-table-column prop=\"updated_at\" label=\"修改时间\" width=\"160\"/>\r\n      <el-table-column label=\"操作\" width=\"240\">\r\n        <template #default=\"{ row }\">\r\n          <el-button-group>\r\n            <button-link size=\"small\" :to=\"`/configs/create?category_id=${row.id}`\">添加配置</button-link>\r\n            <button-link size=\"small\" :to=\"`/configs?category_id=${row.id}`\">查看配置</button-link>\r\n            <row-destroy notice=\"分类下的所有配置都会被删除\"/>\r\n          </el-button-group>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"card-footer\">\r\n      <pagination :page=\"page\"/>\r\n    </div>\r\n\r\n    <el-dialog\r\n      title=\"添加分类\"\r\n      :visible.sync=\"createDialog\"\r\n      width=\"400px\"\r\n      append-to-body\r\n    >\r\n      <lz-form\r\n        style=\"width: auto;\"\r\n        ref=\"form\"\r\n        :submit=\"onStoreCategory\"\r\n        :errors.sync=\"errors\"\r\n        :form.sync=\"form\"\r\n        label-position=\"top\"\r\n        in-dialog\r\n        disable-redirect\r\n        disable-stay\r\n      >\r\n        <el-form-item label=\"名称\" required prop=\"name\">\r\n          <el-input v-model=\"form.name\" autofocus/>\r\n        </el-form-item>\r\n        <el-form-item label=\"标识\" required prop=\"slug\">\r\n          <el-input v-model=\"form.slug\"/>\r\n        </el-form-item>\r\n      </lz-form>\r\n    </el-dialog>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport SearchForm from '@c/SearchForm'\r\nimport Pagination from '@c/Pagination'\r\nimport {\r\n  getConfigCategories,\r\n  storeConfigCategory,\r\n  updateConfigCategory,\r\n} from '@/api/configs'\r\nimport ButtonLink from '@c/ButtonLink'\r\nimport { getMessage } from '@/libs/utils'\r\nimport InputEdit from '@c/quick-edit/InputEdit'\r\nimport LzForm from '@c/LzForm'\r\nimport RowDestroy from '@c/LzTable/RowDestroy'\r\n\r\nexport default {\r\n  name: 'Index',\r\n  components: {\r\n    RowDestroy,\r\n    InputEdit,\r\n    ButtonLink,\r\n    SearchForm,\r\n    Pagination,\r\n    LzForm,\r\n  },\r\n  data() {\r\n    return {\r\n      search: [\r\n        {\r\n          field: 'name',\r\n          label: '名称',\r\n        },\r\n        {\r\n          field: 'slug',\r\n          label: '标识',\r\n        },\r\n      ],\r\n\r\n      cates: [],\r\n      page: null,\r\n\r\n      createDialog: false,\r\n\r\n      form: {\r\n        name: '',\r\n        slug: '',\r\n      },\r\n      errors: {},\r\n    }\r\n  },\r\n  methods: {\r\n    async onStoreCategory() {\r\n      const { data } = await storeConfigCategory(this.form)\r\n\r\n      this.createDialog = false\r\n      this.cates.unshift(data)\r\n    },\r\n    updateConfigCategory,\r\n  },\r\n  watch: {\r\n    $route: {\r\n      async handler(newVal) {\r\n        const { data: { data, meta } } = await getConfigCategories(newVal.query)\r\n        this.cates = data\r\n        this.page = meta\r\n      },\r\n      immediate: true,\r\n    },\r\n    createDialog(newVal) {\r\n      if (!newVal) {\r\n        this.form = {\r\n          name: '',\r\n          slug: '',\r\n        }\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=77439e5b&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}