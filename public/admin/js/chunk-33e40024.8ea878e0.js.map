{"version":3,"sources":["webpack:///./src/components/LzForm/FormHelper.js","webpack:///./src/views/admin-users/EditProfile.vue?5658","webpack:///src/views/admin-users/EditProfile.vue","webpack:///./src/views/admin-users/EditProfile.vue?da99","webpack:///./src/views/admin-users/EditProfile.vue"],"names":["provide","view","this","data","formField","idField","computed","editMode","resourceId","$route","params","created","backupForm","methods","getResourceId","key","formBak","JSON","parse","stringify","$data","fillForm","assignExists","render","_vm","_h","$createElement","_c","_self","scopedSlots","_u","fn","proxy","attrs","ref","getData","onSubmit","errors","form","on","$event","getInfo","model","value","callback","$$v","$set","expression","_l","i","id","staticClass","_v","_s","name","staticRenderFns","components","LzForm","FilePicker","mixins","avatar","password","password_confirmation","profile","defaultValue","component"],"mappings":"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","file":"js/chunk-33e40024.8ea878e0.js","sourcesContent":["import { assignExists } from '@/libs/utils'\n\nexport default {\n  provide() {\n    return {\n      view: this,\n    }\n  },\n  data() {\n    return {\n      /**\n       * 保存表单数据的键名\n       */\n      formField: 'form',\n      /**\n       * 编辑时，路由中的动态值\n       */\n      idField: 'id',\n    }\n  },\n  computed: {\n    editMode() {\n      return !!this.resourceId\n    },\n    resourceId() {\n      return this.$route.params[this.idField]\n    },\n  },\n  created() {\n    this.backupForm()\n  },\n  methods: {\n    getResourceId(key = 'id') {\n      return this.$route.params[key]\n    },\n    /**\n     * 备份表单原始数据，路由切换时，用来重置表单\n     */\n    backupForm() {\n      this.formBak = JSON.parse(JSON.stringify(this.$data[this.formField]))\n    },\n    /**\n     * 填充表单数据\n     *\n     * @param data\n     */\n    fillForm(data) {\n      this.$data[this.formField] = assignExists(this.$data[this.formField], data)\n    },\n  },\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('content-header')]},proxy:true}])},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('lz-form',{ref:\"form\",attrs:{\"get-data\":_vm.getData,\"submit\":_vm.onSubmit,\"errors\":_vm.errors,\"form\":_vm.form,\"disable-redirect\":\"\",\"disable-stay\":\"\",\"edit-mode\":\"\"},on:{\"update:errors\":function($event){_vm.errors=$event},\"update:form\":function($event){_vm.form=$event}}},[_c('el-form-item',{attrs:{\"label\":\"账号\"}},[_c('el-input',{attrs:{\"value\":_vm.getInfo('username'),\"readonly\":\"\"}})],1),_c('el-form-item',{attrs:{\"label\":\"姓名\",\"required\":\"\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"头像\",\"prop\":\"avatar\"}},[_c('file-picker',{attrs:{\"ext\":\"jpg,gif,png,jpeg\"},model:{value:(_vm.form.avatar),callback:function ($$v) {_vm.$set(_vm.form, \"avatar\", $$v)},expression:\"form.avatar\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"new-password\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"password_confirmation\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"new-password\"},model:{value:(_vm.form.password_confirmation),callback:function ($$v) {_vm.$set(_vm.form, \"password_confirmation\", $$v)},expression:\"form.password_confirmation\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色\"}},_vm._l((_vm.getInfo('roles', [])),function(i){return _c('el-tag',{key:i.id,staticClass:\"mr-1\"},[_vm._v(\"\\n          \"+_vm._s(i.name)+\"\\n        \")])}),1),_c('el-form-item',{attrs:{\"label\":\"权限\"}},_vm._l((_vm.getInfo('permissions', [])),function(i){return _c('el-tag',{key:i.id,staticClass:\"mr-1\"},[_vm._v(\"\\n          \"+_vm._s(i.name)+\"\\n        \")])}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-card>\n    <template #header>\n      <content-header/>\n    </template>\n    <el-row type=\"flex\" justify=\"center\">\n      <lz-form\n        ref=\"form\"\n        :get-data=\"getData\"\n        :submit=\"onSubmit\"\n        :errors.sync=\"errors\"\n        :form.sync=\"form\"\n        disable-redirect\n        disable-stay\n        edit-mode\n      >\n        <el-form-item label=\"账号\">\n          <el-input :value=\"getInfo('username')\" readonly/>\n        </el-form-item>\n        <el-form-item label=\"姓名\" required prop=\"name\">\n          <el-input v-model=\"form.name\"/>\n        </el-form-item>\n        <el-form-item label=\"头像\" prop=\"avatar\">\n          <file-picker\n            v-model=\"form.avatar\"\n            ext=\"jpg,gif,png,jpeg\"\n          />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input\n            v-model=\"form.password\"\n            type=\"password\"\n            autocomplete=\"new-password\"\n          />\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"password_confirmation\">\n          <el-input\n            v-model=\"form.password_confirmation\"\n            type=\"password\"\n            autocomplete=\"new-password\"\n          />\n        </el-form-item>\n        <el-form-item label=\"角色\">\n          <el-tag\n            v-for=\"i of getInfo('roles', [])\"\n            :key=\"i.id\"\n            class=\"mr-1\"\n          >\n            {{ i.name }}\n          </el-tag>\n        </el-form-item>\n        <el-form-item label=\"权限\">\n          <el-tag\n            v-for=\"i of getInfo('permissions', [])\"\n            :key=\"i.id\"\n            class=\"mr-1\"\n          >\n            {{ i.name }}\n          </el-tag>\n        </el-form-item>\n      </lz-form>\n    </el-row>\n  </el-card>\n</template>\n\n<script>\nimport LzForm from '@c/LzForm'\nimport FormHelper from '@c/LzForm/FormHelper'\nimport { editUser, updateUser } from '@/api/admin-users'\nimport FilePicker from '@c/FilePicker'\n\nexport default {\n  name: 'EditProfile',\n  components: {\n    LzForm,\n    FilePicker,\n  },\n  mixins: [\n    FormHelper,\n  ],\n  data() {\n    return {\n      form: {\n        name: '',\n        avatar: '',\n        password: '',\n        password_confirmation: '',\n      },\n      profile: null,\n      errors: {},\n    }\n  },\n  methods: {\n    getInfo(key, defaultValue) {\n      return this.profile ? this.profile[key] : defaultValue\n    },\n    async getData() {\n      const { data } = await editUser()\n      this.profile = data\n      this.fillForm(data)\n    },\n    async onSubmit() {\n      const { data } = await updateUser(this.form)\n      this.$store.commit('SET_USER', data)\n      this.form = Object.assign({}, this.form, {\n        password: '',\n        password_confirmation: '',\n      })\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditProfile.vue?vue&type=template&id=c8c659c2&\"\nimport script from \"./EditProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./EditProfile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}