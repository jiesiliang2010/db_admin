{"version":3,"sources":["webpack:///./src/components/LzForm/FormHelper.js","webpack:///./src/views/admin-users/EditProfile.vue?4e44","webpack:///src/views/admin-users/EditProfile.vue","webpack:///./src/views/admin-users/EditProfile.vue?da99","webpack:///./src/views/admin-users/EditProfile.vue"],"names":["provide","view","this","data","formField","idField","computed","editMode","resourceId","$route","params","created","backupForm","methods","getResourceId","key","formBak","JSON","parse","stringify","$data","fillForm","assignExists","render","_vm","_h","$createElement","_c","_self","scopedSlots","_u","fn","proxy","attrs","ref","getData","onSubmit","errors","form","on","$event","getInfo","model","value","callback","$$v","$set","expression","_l","i","id","staticClass","_v","_s","name","staticRenderFns","components","LzForm","FilePicker","mixins","avatar","password","password_confirmation","profile","defaultValue","component"],"mappings":"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","file":"js/chunk-33e40024.52435d68.js","sourcesContent":["import { assignExists } from '@/libs/utils'\r\n\r\nexport default {\r\n  provide() {\r\n    return {\r\n      view: this,\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      /**\r\n       * 保存表单数据的键名\r\n       */\r\n      formField: 'form',\r\n      /**\r\n       * 编辑时，路由中的动态值\r\n       */\r\n      idField: 'id',\r\n    }\r\n  },\r\n  computed: {\r\n    editMode() {\r\n      return !!this.resourceId\r\n    },\r\n    resourceId() {\r\n      return this.$route.params[this.idField]\r\n    },\r\n  },\r\n  created() {\r\n    this.backupForm()\r\n  },\r\n  methods: {\r\n    getResourceId(key = 'id') {\r\n      return this.$route.params[key]\r\n    },\r\n    /**\r\n     * 备份表单原始数据，路由切换时，用来重置表单\r\n     */\r\n    backupForm() {\r\n      this.formBak = JSON.parse(JSON.stringify(this.$data[this.formField]))\r\n    },\r\n    /**\r\n     * 填充表单数据\r\n     *\r\n     * @param data\r\n     */\r\n    fillForm(data) {\r\n      this.$data[this.formField] = assignExists(this.$data[this.formField], data)\r\n    },\r\n  },\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('content-header')]},proxy:true}])},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('lz-form',{ref:\"form\",attrs:{\"get-data\":_vm.getData,\"submit\":_vm.onSubmit,\"errors\":_vm.errors,\"form\":_vm.form,\"disable-redirect\":\"\",\"disable-stay\":\"\",\"edit-mode\":\"\"},on:{\"update:errors\":function($event){_vm.errors=$event},\"update:form\":function($event){_vm.form=$event}}},[_c('el-form-item',{attrs:{\"label\":\"账号\"}},[_c('el-input',{attrs:{\"value\":_vm.getInfo('username'),\"readonly\":\"\"}})],1),_c('el-form-item',{attrs:{\"label\":\"姓名\",\"required\":\"\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"头像\",\"prop\":\"avatar\"}},[_c('file-picker',{attrs:{\"ext\":\"jpg,gif,png,jpeg\"},model:{value:(_vm.form.avatar),callback:function ($$v) {_vm.$set(_vm.form, \"avatar\", $$v)},expression:\"form.avatar\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"new-password\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"password_confirmation\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"new-password\"},model:{value:(_vm.form.password_confirmation),callback:function ($$v) {_vm.$set(_vm.form, \"password_confirmation\", $$v)},expression:\"form.password_confirmation\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色\"}},_vm._l((_vm.getInfo('roles', [])),function(i){return _c('el-tag',{key:i.id,staticClass:\"mr-1\"},[_vm._v(\"\\n          \"+_vm._s(i.name)+\"\\n        \")])}),1),_c('el-form-item',{attrs:{\"label\":\"权限\"}},_vm._l((_vm.getInfo('permissions', [])),function(i){return _c('el-tag',{key:i.id,staticClass:\"mr-1\"},[_vm._v(\"\\n          \"+_vm._s(i.name)+\"\\n        \")])}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card>\r\n    <template #header>\r\n      <content-header/>\r\n    </template>\r\n    <el-row type=\"flex\" justify=\"center\">\r\n      <lz-form\r\n        ref=\"form\"\r\n        :get-data=\"getData\"\r\n        :submit=\"onSubmit\"\r\n        :errors.sync=\"errors\"\r\n        :form.sync=\"form\"\r\n        disable-redirect\r\n        disable-stay\r\n        edit-mode\r\n      >\r\n        <el-form-item label=\"账号\">\r\n          <el-input :value=\"getInfo('username')\" readonly/>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\" required prop=\"name\">\r\n          <el-input v-model=\"form.name\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"头像\" prop=\"avatar\">\r\n          <file-picker\r\n            v-model=\"form.avatar\"\r\n            ext=\"jpg,gif,png,jpeg\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input\r\n            v-model=\"form.password\"\r\n            type=\"password\"\r\n            autocomplete=\"new-password\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\" prop=\"password_confirmation\">\r\n          <el-input\r\n            v-model=\"form.password_confirmation\"\r\n            type=\"password\"\r\n            autocomplete=\"new-password\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色\">\r\n          <el-tag\r\n            v-for=\"i of getInfo('roles', [])\"\r\n            :key=\"i.id\"\r\n            class=\"mr-1\"\r\n          >\r\n            {{ i.name }}\r\n          </el-tag>\r\n        </el-form-item>\r\n        <el-form-item label=\"权限\">\r\n          <el-tag\r\n            v-for=\"i of getInfo('permissions', [])\"\r\n            :key=\"i.id\"\r\n            class=\"mr-1\"\r\n          >\r\n            {{ i.name }}\r\n          </el-tag>\r\n        </el-form-item>\r\n      </lz-form>\r\n    </el-row>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport LzForm from '@c/LzForm'\r\nimport FormHelper from '@c/LzForm/FormHelper'\r\nimport { editUser, updateUser } from '@/api/admin-users'\r\nimport FilePicker from '@c/FilePicker'\r\n\r\nexport default {\r\n  name: 'EditProfile',\r\n  components: {\r\n    LzForm,\r\n    FilePicker,\r\n  },\r\n  mixins: [\r\n    FormHelper,\r\n  ],\r\n  data() {\r\n    return {\r\n      form: {\r\n        name: '',\r\n        avatar: '',\r\n        password: '',\r\n        password_confirmation: '',\r\n      },\r\n      profile: null,\r\n      errors: {},\r\n    }\r\n  },\r\n  methods: {\r\n    getInfo(key, defaultValue) {\r\n      return this.profile ? this.profile[key] : defaultValue\r\n    },\r\n    async getData() {\r\n      const { data } = await editUser()\r\n      this.profile = data\r\n      this.fillForm(data)\r\n    },\r\n    async onSubmit() {\r\n      const { data } = await updateUser(this.form)\r\n      this.$store.commit('SET_USER', data)\r\n      this.form = Object.assign({}, this.form, {\r\n        password: '',\r\n        password_confirmation: '',\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProfile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditProfile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditProfile.vue?vue&type=template&id=1ef921a5&\"\nimport script from \"./EditProfile.vue?vue&type=script&lang=js&\"\nexport * from \"./EditProfile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}