{"version":3,"sources":["webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./src/views/configs/Form.vue?c94b","webpack:///./src/views/configs/TypeOptions.vue?83b8","webpack:///src/views/configs/TypeOptions.vue","webpack:///./src/views/configs/TypeOptions.vue?3a83","webpack:///./src/views/configs/TypeOptions.vue","webpack:///src/views/configs/Form.vue","webpack:///./src/views/configs/Form.vue?2282","webpack:///./src/views/configs/Form.vue","webpack:///./node_modules/@babel/runtime-corejs2/core-js/get-iterator.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray.js","webpack:///./src/components/LzForm/FormHelper.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///src/views/configs/TypeInput.vue","webpack:///./src/views/configs/TypeInput.vue","webpack:///./src/views/configs/TypeInput.vue?36d6"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","proxy","attrs","ref","getData","onSubmit","errors","form","editMode","on","$event","model","value","callback","$$v","$set","expression","_l","i","_v","_s","label","id","name","type","options","staticRenderFns","CONFIG_TYPES","FILE","SINGLE_SELECT","MULTIPLE_SELECT","inject","elForm","default","elFormItem","props","String","Object","computed","created","optionsBak","registryToFormItem","$on","onReset","beforeDestroy","$off","methods","inputComponent","initOptions","defaultValue","max","ext","v","$emit","watch","handler","immediate","$route","component","components","TypeInput","TypeOptions","LzForm","mixins","data","category_id","slug","desc","validation_rules","types","cates","_arrayWithHoles","arr","_iterableToArrayLimit","prototype","toString","call","_arr","_n","_d","_e","undefined","_i","next","done","push","length","err","_nonIterableRest","TypeError","_slicedToArray","provide","view","formField","idField","resourceId","params","backupForm","getResourceId","formBak","JSON","parse","stringify","$data","fillForm","assignExists","anObject","get","getIterator","it","iterFn","FilePicker","filePickerKey","selectOptions","pairs","forEach","onInput","val","initValue","Array","isArray","indexOf","updateFilePicker","slice","newVal","input","TYPES","INPUT","OTHER","TEXTAREA","assign","renderData","rows","multiple","isMultiple","slots","map","clearable","h"],"mappings":"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","file":"js/chunk-272c72b2.410189fc.js","sourcesContent":["require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('content-header')]},proxy:true}])},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('lz-form',{ref:\"form\",attrs:{\"get-data\":_vm.getData,\"submit\":_vm.onSubmit,\"errors\":_vm.errors,\"form\":_vm.form,\"edit-mode\":_vm.editMode},on:{\"update:errors\":function($event){_vm.errors=$event},\"update:form\":function($event){_vm.form=$event}}},[_c('el-form-item',{attrs:{\"label\":\"类型\",\"required\":\"\",\"prop\":\"type\"}},[_c('el-radio-group',{model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},_vm._l((_vm.types),function(i){return _c('el-radio',{key:i.value,attrs:{\"label\":i.value}},[_vm._v(\"\\n            \"+_vm._s(i.label)+\"\\n          \")])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"分类\",\"required\":\"\",\"prop\":\"category_id\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择分类\",\"filterable\":\"\"},model:{value:(_vm.form.category_id),callback:function ($$v) {_vm.$set(_vm.form, \"category_id\", $$v)},expression:\"form.category_id\"}},_vm._l((_vm.cates),function(i){return _c('el-option',{key:i.id,attrs:{\"label\":i.name,\"value\":i.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"名称\",\"required\":\"\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"标识\",\"required\":\"\",\"prop\":\"slug\"}},[_c('el-input',{model:{value:(_vm.form.slug),callback:function ($$v) {_vm.$set(_vm.form, \"slug\", $$v)},expression:\"form.slug\"}})],1),_c('el-form-item',{attrs:{\"label\":\"简介\",\"prop\":\"desc\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.desc),callback:function ($$v) {_vm.$set(_vm.form, \"desc\", $$v)},expression:\"form.desc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"选项\",\"prop\":\"options\"}},[_c('type-options',{attrs:{\"type\":_vm.form.type},model:{value:(_vm.form.options),callback:function ($$v) {_vm.$set(_vm.form, \"options\", $$v)},expression:\"form.options\"}})],1),_c('el-form-item',{attrs:{\"label\":\"值\",\"prop\":\"value\"}},[_c('type-input',{attrs:{\"type\":_vm.form.type,\"options\":_vm.form.options},model:{value:(_vm.form.value),callback:function ($$v) {_vm.$set(_vm.form, \"value\", $$v)},expression:\"form.value\"}})],1),_c('el-form-item',{attrs:{\"label\":\"验证规则\",\"prop\":\"validation_rules\"}},[_c('el-input',{model:{value:(_vm.form.validation_rules),callback:function ($$v) {_vm.$set(_vm.form, \"validation_rules\", $$v)},expression:\"form.validation_rules\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{attrs:{\"label-position\":\"top\"}},[(_vm.type === this.CONFIG_TYPES.FILE)?[_c('el-form-item',{attrs:{\"label\":\"最大上传数\"}},[_c('el-input-number',{attrs:{\"min\":1,\"max\":99},model:{value:(_vm.value.max),callback:function ($$v) {_vm.$set(_vm.value, \"max\", $$v)},expression:\"value.max\"}})],1),_c('el-form-item',{attrs:{\"label\":\"文件类型\"}},[_c('el-input',{attrs:{\"placeholder\":\"多个之间用英文逗号隔开\"},model:{value:(_vm.value.ext),callback:function ($$v) {_vm.$set(_vm.value, \"ext\", $$v)},expression:\"value.ext\"}})],1)]:(_vm.type === this.CONFIG_TYPES.SINGLE_SELECT || _vm.type === this.CONFIG_TYPES.MULTIPLE_SELECT)?[_c('el-form-item',{attrs:{\"label\":\"选项设置\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"4\",\"placeholder\":'配置示例：\\n值1=>文字1\\n值2=>文字2'},model:{value:(_vm.value.options),callback:function ($$v) {_vm.$set(_vm.value, \"options\", $$v)},expression:\"value.options\"}})],1),_c('el-form-item',{attrs:{\"label\":\"选择形式\"}},[_c('el-radio-group',{model:{value:(_vm.value.type),callback:function ($$v) {_vm.$set(_vm.value, \"type\", $$v)},expression:\"value.type\"}},[_c('el-radio',{attrs:{\"label\":\"input\"}},[_vm._v(\"单选/复选\")]),_c('el-radio',{attrs:{\"label\":\"select\"}},[_vm._v(\"下拉选择\")])],1)],1)]:[_c('span',[_vm._v(\"无\")])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-form label-position=\"top\">\n    <template v-if=\"type === this.CONFIG_TYPES.FILE\">\n      <el-form-item label=\"最大上传数\">\n        <el-input-number v-model=\"value.max\" :min=\"1\" :max=\"99\"/>\n      </el-form-item>\n      <el-form-item label=\"文件类型\">\n        <el-input v-model=\"value.ext\" placeholder=\"多个之间用英文逗号隔开\"/>\n      </el-form-item>\n    </template>\n    <template v-else-if=\"type === this.CONFIG_TYPES.SINGLE_SELECT || type === this.CONFIG_TYPES.MULTIPLE_SELECT\">\n      <el-form-item label=\"选项设置\">\n        <el-input\n          type=\"textarea\"\n          rows=\"4\"\n          v-model=\"value.options\"\n          :placeholder=\"'配置示例：\\n值1=>文字1\\n值2=>文字2'\"\n        />\n      </el-form-item>\n      <el-form-item label=\"选择形式\">\n        <el-radio-group v-model=\"value.type\">\n          <el-radio label=\"input\">单选/复选</el-radio>\n          <el-radio label=\"select\">下拉选择</el-radio>\n        </el-radio-group>\n      </el-form-item>\n    </template>\n    <template v-else>\n      <span>无</span>\n    </template>\n  </el-form>\n</template>\n\n<script>\nimport { mapConstants } from '@/libs/constants'\nimport _pick from 'lodash/pick'\n\nexport default {\n  name: 'TypeOptions',\n  inject: {\n    elForm: {\n      default: '',\n    },\n\n    elFormItem: {\n      default: '',\n    },\n  },\n  props: {\n    type: String,\n    value: Object,\n  },\n  computed: {\n    ...mapConstants(['CONFIG_TYPES']),\n  },\n  created() {\n    /**\n     * 存储类型对应的 options\n     * 用来在切换类型后，恢复原来设置的值\n     */\n    this.optionsBak = {}\n\n    this.registryToFormItem()\n    this.$on('field-reset', this.onReset)\n  },\n  beforeDestroy() {\n    this.$off('field-reset', this.onReset)\n  },\n  methods: {\n    registryToFormItem() {\n      this.elFormItem && (this.elFormItem.inputComponent = this)\n    },\n    onReset() {\n      this.optionsBak = {}\n      this.initOptions()\n    },\n    initOptions() {\n      const type = this.type\n      if (!type) {\n        return\n      }\n\n      let defaultValue\n      switch (type) {\n        case this.CONFIG_TYPES.FILE:\n          defaultValue = {\n            max: 1,\n            ext: '',\n          }\n          break\n        case this.CONFIG_TYPES.SINGLE_SELECT:\n        case this.CONFIG_TYPES.MULTIPLE_SELECT:\n          defaultValue = {\n            options: '',\n            type: 'input',\n          }\n          break\n        default:\n          defaultValue = null\n      }\n\n      const v = defaultValue\n        ? _pick(Object.assign({}, this.optionsBak[type] || defaultValue, this.value), Object.keys(defaultValue))\n        : null\n      // 存储类型对应的 options，用来还原\n      this.optionsBak[type] = v\n      this.$emit('input', v)\n    },\n  },\n  watch: {\n    type: {\n      handler() {\n        this.initOptions()\n      },\n      immediate: true,\n    },\n    $route() {\n      // 路由变化会复用组件，清空一下\n      this.optionsBak = {}\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeOptions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeOptions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TypeOptions.vue?vue&type=template&id=c091a5a6&\"\nimport script from \"./TypeOptions.vue?vue&type=script&lang=js&\"\nexport * from \"./TypeOptions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-card>\n    <template #header>\n      <content-header/>\n    </template>\n    <el-row type=\"flex\" justify=\"center\">\n      <lz-form\n        ref=\"form\"\n        :get-data=\"getData\"\n        :submit=\"onSubmit\"\n        :errors.sync=\"errors\"\n        :form.sync=\"form\"\n        :edit-mode=\"editMode\"\n      >\n        <el-form-item label=\"类型\" required prop=\"type\">\n          <el-radio-group v-model=\"form.type\">\n            <el-radio\n              v-for=\"i of types\"\n              :key=\"i.value\"\n              :label=\"i.value\"\n            >\n              {{ i.label }}\n            </el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"分类\" required prop=\"category_id\">\n          <el-select\n            v-model=\"form.category_id\"\n            placeholder=\"选择分类\"\n            filterable\n          >\n            <el-option\n              v-for=\"i of cates\"\n              :key=\"i.id\"\n              :label=\"i.name\"\n              :value=\"i.id\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"名称\" required prop=\"name\">\n          <el-input v-model=\"form.name\"/>\n        </el-form-item>\n        <el-form-item label=\"标识\" required prop=\"slug\">\n          <el-input v-model=\"form.slug\"/>\n        </el-form-item>\n        <el-form-item label=\"简介\" prop=\"desc\">\n          <el-input v-model=\"form.desc\" type=\"textarea\"/>\n        </el-form-item>\n        <el-form-item label=\"选项\" prop=\"options\">\n          <type-options v-model=\"form.options\" :type=\"form.type\"/>\n        </el-form-item>\n        <el-form-item label=\"值\" prop=\"value\">\n          <type-input\n            v-model=\"form.value\"\n            :type=\"form.type\"\n            :options=\"form.options\"\n          />\n        </el-form-item>\n        <el-form-item label=\"验证规则\" prop=\"validation_rules\">\n          <el-input v-model=\"form.validation_rules\"/>\n        </el-form-item>\n      </lz-form>\n    </el-row>\n  </el-card>\n</template>\n\n<script>\nimport LzForm from '@c/LzForm'\nimport {\n  createConfig,\n  editConfig,\n  getConfigCategories, storeConfig, updateConfig,\n} from '@/api/configs'\nimport FormHelper from '@c/LzForm/FormHelper'\nimport _forIn from 'lodash/forIn'\nimport TypeOptions from '@v/configs/TypeOptions'\nimport TypeInput from '@v/configs/TypeInput'\nimport { toInt } from '@/libs/utils'\n\nexport default {\n  name: 'Form',\n  components: {\n    TypeInput,\n    TypeOptions,\n    LzForm,\n  },\n  mixins: [\n    FormHelper,\n  ],\n  data() {\n    return {\n      form: {\n        type: '',\n        category_id: '',\n        name: '',\n        slug: '',\n        desc: '',\n        options: {},\n        value: '',\n        validation_rules: '',\n      },\n      errors: {},\n\n      types: [],\n      cates: [],\n    }\n  },\n  methods: {\n    async getData() {\n      let data\n\n      if (this.editMode) {\n        ({ data } = await editConfig(this.resourceId))\n      } else {\n        ({ data } = await createConfig())\n      }\n\n      this.cates = data.categories\n\n      const types = []\n      _forIn(data.types_map, (value, key) => {\n        types.push({\n          value: key,\n          label: value,\n        })\n      })\n      this.types = types\n      // 表单中类型，默认选择第一个\n      this.form.type = types[0].value\n\n      this.editMode\n        ? this.fillForm(data.config)\n        : this.form.category_id = toInt(this.$route.query.category_id, '')\n    },\n    async onSubmit() {\n      if (this.editMode) {\n        await updateConfig(this.resourceId, this.form)\n      } else {\n        await storeConfig(this.form)\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=7c287dbe&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = require(\"core-js/library/fn/get-iterator\");","import _Array$isArray from \"../../core-js/array/is-array\";\nexport default function _arrayWithHoles(arr) {\n  if (_Array$isArray(arr)) return arr;\n}","import _getIterator from \"../../core-js/get-iterator\";\nimport _isIterable from \"../../core-js/is-iterable\";\nexport default function _iterableToArrayLimit(arr, i) {\n  if (!(_isIterable(Object(arr)) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = _getIterator(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","import { assignExists } from '@/libs/utils'\n\nexport default {\n  provide() {\n    return {\n      view: this,\n    }\n  },\n  data() {\n    return {\n      /**\n       * 保存表单数据的键名\n       */\n      formField: 'form',\n      /**\n       * 编辑时，路由中的动态值\n       */\n      idField: 'id',\n    }\n  },\n  computed: {\n    editMode() {\n      return !!this.resourceId\n    },\n    resourceId() {\n      return this.$route.params[this.idField]\n    },\n  },\n  created() {\n    this.backupForm()\n  },\n  methods: {\n    getResourceId(key = 'id') {\n      return this.$route.params[key]\n    },\n    /**\n     * 备份表单原始数据，路由切换时，用来重置表单\n     */\n    backupForm() {\n      this.formBak = JSON.parse(JSON.stringify(this.$data[this.formField]))\n    },\n    /**\n     * 填充表单数据\n     *\n     * @param data\n     */\n    fillForm(data) {\n      this.$data[this.formField] = assignExists(this.$data[this.formField], data)\n    },\n  },\n}\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","<script>\nimport { mapConstants } from '@/libs/constants'\nimport FilePicker from '@c/FilePicker'\nimport _debounce from 'lodash/debounce'\n\nexport default {\n  name: 'TypeInput',\n  components: {\n    FilePicker,\n  },\n  inject: {\n    elForm: {\n      default: '',\n    },\n\n    elFormItem: {\n      default: '',\n    },\n  },\n  data() {\n    return {\n      filePickerKey: 1,\n    }\n  },\n  props: {\n    type: String,\n    value: null,\n    options: Object,\n  },\n  computed: {\n    ...mapConstants(['CONFIG_TYPES']),\n    selectOptions() {\n      if (\n        (this.type !== this.CONFIG_TYPES.SINGLE_SELECT) &&\n        (this.type !== this.CONFIG_TYPES.MULTIPLE_SELECT)\n      ) {\n        return []\n      } else {\n        const pairs = this.options.options.split('\\n')\n        const options = []\n        pairs.forEach((pair) => {\n          const [value, label] = pair.split('=>').map((i) => i.trim())\n          if (label) {\n            options.push({ value, label })\n          }\n        })\n        return options\n      }\n    },\n  },\n  methods: {\n    onInput(val) {\n      this.$emit('input', val)\n    },\n    /**\n     * 当类型或者文件选择最大限制改变时，要改变值的类型\n     */\n    initValue() {\n      if (this.type === this.CONFIG_TYPES.FILE) {\n        if (this.options.max > 1 && !Array.isArray(this.value)) {\n          // 如果是多选，且原来的值不是数组，则用数组包起来，空值则为空数组\n          this.onInput(this.value ? [this.value] : [])\n        } else if (this.options.max <= 1 && Array.isArray(this.value)) {\n          // 如果是单选，且原来的值是数组，则选第一个，否则为 null\n          this.onInput(this.value[0] || null)\n        }\n      } else if (this.type === this.CONFIG_TYPES.MULTIPLE_SELECT) {\n        !Array.isArray(this.value) && this.onInput([])\n      } else {\n        if (['string', 'boolean', 'number'].indexOf(typeof this.value) === -1) {\n          this.onInput(null)\n        }\n      }\n    },\n    /**\n     * 重新渲染 FilePicker 组件\n     */\n    updateFilePicker: _debounce(function () {\n      this.filePickerKey++\n    }, 200),\n  },\n  watch: {\n    type: {\n      handler() {\n        this.initValue()\n      },\n      immediate: true,\n    },\n    'options.max'(newVal, oldVal) {\n      // 如果变了之后，都还是多选，则不用更新\n      // 这里条件取反\n      if (!((newVal > 1) && (oldVal > 1))) {\n        this.updateFilePicker()\n      }\n      this.initValue()\n      // 多选时，如果数量变少了，则要去掉 value 中多出来的文件\n      if ((newVal > 1) && (newVal < oldVal)) {\n        this.onInput(this.value.slice(0, newVal))\n      }\n    },\n    'options.ext'() {\n      this.updateFilePicker()\n    },\n  },\n  render(h) {\n    let component = null\n    const renderData = {\n      props: {\n        value: this.value,\n      },\n      on: {\n        input: this.onInput,\n      },\n    }\n    let slots = null\n\n    const TYPES = this.CONFIG_TYPES\n    switch (this.type) {\n      case TYPES.INPUT:\n      case TYPES.OTHER:\n        component = 'el-input'\n        break\n      case TYPES.TEXTAREA:\n        component = 'el-input'\n        Object.assign(renderData.props, {\n          rows: 4,\n          type: 'textarea',\n        })\n        break\n      case TYPES.FILE:\n        component = 'file-picker'\n        Object.assign(renderData.props, {\n          max: this.options.max,\n          ext: this.options.ext,\n          multiple: this.options.max > 1,\n        })\n        renderData.key = this.filePickerKey\n        break\n      case TYPES.SINGLE_SELECT:\n      case TYPES.MULTIPLE_SELECT:\n        const isMultiple = this.type === TYPES.MULTIPLE_SELECT\n        if (this.options.type === 'input') {\n          component = isMultiple\n            ? 'el-checkbox-group'\n            : 'el-radio-group'\n          slots = this.selectOptions.map((i) => (\n            h(isMultiple ? 'el-checkbox' : 'el-radio', {\n              props: {\n                key: i.value,\n                label: i.value,\n              },\n            }, i.label)\n          ))\n        } else if (this.options.type === 'select') {\n          component = 'el-select'\n          Object.assign(renderData.props, {\n            multiple: isMultiple,\n            clearable: isMultiple,\n          })\n          slots = this.selectOptions.map((i) => (\n            <el-option key={i.value} value={i.value} label={i.label}/>\n          ))\n        }\n        break\n      default:\n      // do nothing\n    }\n\n    return h(component, renderData, slots)\n  },\n}\n</script>\n","var render, staticRenderFns\nimport script from \"./TypeInput.vue?vue&type=script&lang=js&\"\nexport * from \"./TypeInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypeInput.vue?vue&type=script&lang=js&\""],"sourceRoot":""}