(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-517108a3"],{"0240":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button-link",{attrs:{size:"small",to:t.link}},[t._t("default",[t._v("编辑")])],2)},a=[],i=n("76ab"),o=n("1614"),s={name:"RowToEdit",components:{ButtonLink:i["a"]},mixins:[o["a"]],data:function(){return{identify:void 0}},computed:{link:function(){return this.checkResourceName(),"/".concat(this.resource,"/").concat(this.identify,"/edit")}},mounted:function(){this.setIdentify()}},c=s,u=n("2877"),l=Object(u["a"])(c,r,a,!1,null,null,null);e["a"]=l.exports},"07e1":function(t,e,n){"use strict";var r=n("f42a"),a=n.n(r);a.a},1614:function(t,e,n){"use strict";n("7f7f"),n("5df3"),n("1c4c"),n("c5f6");e["a"]={inject:{elTable:{default:""}},data:function(){return{identify:void 0}},props:{resource:{type:String,default:function(){return this.elTable&&this.elTable.resource}},data:{type:Array,default:function(){return this.elTable&&this.elTable.data}},index:[Number,String],rowKey:{type:String,default:function(){return this.elTable&&this.elTable.rowKey}}},methods:{getIndex:function(){if(void 0!==this.index)return this.index;if(this.elTable){var t=this.findTr();if(t){var e=Array.from(this.elTable.$el.querySelectorAll(".el-table__body tr")).indexOf(t);return-1===e?void 0:e}}},findTr:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$el;if(t){var e=t.tagName.toLowerCase();return"tr"===e?t:"tbody"===e?void 0:this.findTr(t.parentNode)}},setIdentify:function(){if(void 0===this.identify){var t=this.getIndex();this.identify=this.data[t][this.rowKey]}},checkResourceName:function(){if(!this.resource)throw new Error("必须在 [ 表格 ] 或者 [ ".concat(this.$options.name," ] 中，传入 [ resource ] 属性"))}}}},1799:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.page?n("el-pagination",t._b({ref:"page",attrs:{"page-sizes":t.pageSizes,"current-page":t.currentPage,"page-size":t.perPage,total:t.page.total,layout:t.layout,background:""},on:{"size-change":t.onSizeChange,"current-change":t.onChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.perPage=e},"update:page-size":function(e){t.perPage=e}}},"el-pagination",t.$attrs,!1)):t._e()},a=[],i={name:"Pagination",data:function(){return{currentPage:1,perPage:15}},props:{page:Object,layout:{type:String,default:"total, prev, pager, next, sizes, jumper"},autoPush:{type:Boolean,default:!0}},computed:{pageSizes:function(){var t=[15,30,50,100,200],e=this.page.per_page;return-1===t.indexOf(e)?[this.page.per_page].concat(t):t}},methods:{push:function(){var t=Object.assign({},this.$route.query,{page:this.currentPage,per_page:this.perPage});this.$router.push({path:this.$route.path,query:t})},onSizeChange:function(t){this.$emit("size-change",t),this.autoPush&&(this.currentPage=1,this.push())},onChange:function(t){this.$emit("current-change",t),this.autoPush&&this.push()}},watch:{page:{handler:function(t){var e=this;t&&(this.currentPage=t.current_page,this.perPage=t.per_page,this.$nextTick((function(){e.$refs.page.internalCurrentPage=t.current_page})))},immediate:!0}}},o=i,s=n("2877"),c=Object(s["a"])(o,r,a,!1,null,"0d3103cd",null);e["a"]=c.exports},"38db":function(t,e,n){"use strict";n("8e6e"),n("456d"),n("7f7f"),n("ac6a");var r=n("bd86"),a=(n("96cf"),n("3b8d"));function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s,c,u={name:"SearchForm",data:function(){return{form:{},show:!1}},computed:{anyQuery:function(){var t=this;return this.fields.some((function(e){if(t.$route.query[e.field])return!0}))}},props:{fields:Array,resetCurrentPage:{type:Boolean,default:!0}},created:function(){this.initFormShow()},methods:{onSubmit:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o({},this.$route.query),this.resetCurrentPage&&delete e.page,this.fields.forEach((function(t){var r=t.field,a=n.form[r];"string"===typeof a&&(a=a.trim()),""===a||void 0===a?delete e[r]:e[r]=a})),t.prev=3,t.next=6,this.$router.push({path:this.$route.path,query:e});case 6:t.next=12;break;case 8:if(t.prev=8,t.t0=t["catch"](3),"NavigationDuplicated"===t.t0.name){t.next=12;break}throw t.t0;case 12:case"end":return t.stop()}}),t,this,[[3,8]])})));function e(){return t.apply(this,arguments)}return e}(),onReset:function(){this.form={},this.onSubmit()},initFormShow:function(){var t=this;this.fields.some((function(e){if(t.$route.query[e.field])return t.show=!0,!0}))},setFormValueFromQuery:function(){var t=this,e=this.$route.query;this.fields.forEach((function(n){var r=n.field,a=e[r];t.$set(t.form,r,a)}))}},watch:{$route:{handler:function(){this.setFormValueFromQuery()},immediate:!0}},render:function(t){var e=this;return t("el-button",{attrs:{type:this.anyQuery?"primary":""},class:"search-button"},[t("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"search-form-popover"}},[t("el-form",{class:"pb-3",attrs:{inline:!0},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.onSubmit(t)):null}}},[this.fields.map((function(n){var r;switch(n.type){case"el-select":r=t("el-select",{attrs:{placeholder:n.label,filterable:!0,clearable:!0},model:{value:e.form[n.field],callback:function(t){e.$set(e.form,n.field,t)}}},[n.options.map((function(e){var r=n.valueField||"id",a=n.labelField||"name";return t("el-option",{key:e[r],attrs:{label:e[a],value:String(e[r])}})}))]);break;default:r=t("el-input",{attrs:{placeholder:n.label,clearable:!0},model:{value:e.form[n.field],callback:function(t){e.$set(e.form,n.field,t)}}})}return t("el-form-item",{key:n.field},[r])})),t("el-form-item",{class:"actions"},[t("el-button",{attrs:{type:"primary"},on:{click:this.onSubmit}},["查询"]),t("el-button",{on:{click:this.onReset}},["重置"])])]),t("span",{class:"trigger",slot:"reference"})]),"筛选"])}},l=u,f=(n("8b21"),n("07e1"),n("2877")),p=Object(f["a"])(l,s,c,!1,null,"68604f9a",null);e["a"]=p.exports},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"5d73":function(t,e,n){t.exports=n("469f")},"6ae0":function(t,e,n){},"6fc0":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.comp,t._b({tag:"component",staticClass:"pop-confirm",attrs:{type:t.type,disabled:t.disabled}},"component",t.$attrs,!1),[n("el-popover",{attrs:{placement:"top",width:"160",disabled:t.disabled},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("p",[t._v(t._s(t.notice))]),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini"},on:{click:t.onCancel}},[t._v("取消")]),n("loading-action",{attrs:{type:t.confirmType,size:"mini",action:t.action,disabled:t.disabled}},[t._v("\n        确定\n      ")])],1),n("span",{staticClass:"trigger",attrs:{slot:"reference"},slot:"reference"})]),t._t("default")],2)},a=[],i=(n("96cf"),n("3b8d")),o={name:"PopConfirm",data:function(){return{visible:!1}},props:{notice:{type:String,default:"确认操作？"},confirmType:{type:String,default:"primary"},confirm:Function,type:String,disabled:Boolean,comp:{type:String,default:"el-button"}},methods:{onCancel:function(){this.visible=!1,this.$emit("cancel")},action:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.disabled){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.confirm();case 4:this.visible=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},s=o,c=(n("7868"),n("2877")),u=Object(c["a"])(s,r,a,!1,null,"f5b0dac6",null);e["a"]=u.exports},"768b":function(t,e,n){"use strict";var r=n("a745"),a=n.n(r);function i(t){if(a()(t))return t}var o=n("5d73"),s=n.n(o),c=n("c8bb"),u=n.n(c);function l(t,e){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=s()(t);!(r=(o=c.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(l){a=!0,i=l}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw i}}return n}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(t,e){return i(t)||l(t,e)||f()}n.d(e,"a",(function(){return p}))},7868:function(t,e,n){"use strict";var r=n("6ae0"),a=n.n(r);a.a},"7d7b":function(t,e,n){var r=n("e4ae"),a=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},"8b21":function(t,e,n){"use strict";var r=n("a299"),a=n.n(r);a.a},a299:function(t,e,n){},aef5:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s}));var r=n("ff66");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["b"].get("admin-permissions",{params:t})}function i(t){return r["b"].post("admin-permissions",t)}function o(t,e){return r["b"].put("admin-permissions/".concat(t),e)}function s(t){return r["b"].get("admin-permissions/".concat(t,"/edit"))}},b2d0:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{scopedSlots:t._u([{key:"header",fn:function(){return[n("content-header")]},proxy:!0}])},[n("el-button-group",{staticClass:"mb-3"},[n("search-form",{attrs:{fields:t.search}})],1),n("el-table",{attrs:{data:t.perms,resource:"admin-permissions"}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"150"}}),n("el-table-column",{attrs:{prop:"slug",label:"标识",width:"150"}}),n("el-table-column",{attrs:{label:"路由","min-width":"400"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[n("route-show",{attrs:{data:e}})]}}])}),n("el-table-column",{attrs:{prop:"created_at",label:"添加时间",width:"180"}}),n("el-table-column",{attrs:{prop:"updated_at",label:"修改时间",width:"180"}}),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){t.row,t.$index;return[n("el-button-group",[n("row-to-edit"),n("row-destroy")],1)]}}])})],1),n("div",{staticClass:"card-footer"},[n("pagination",{attrs:{page:t.page}})],1)],1)},a=[],i=(n("96cf"),n("3b8d")),o=n("aef5"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.httpRoute,(function(e,r){return n("div",{key:r,staticClass:"mb-1"},[t._l(e.method,(function(e){return n("el-tag",{key:e,staticClass:"mr-1"},[t._v("\n      "+t._s(e)+"\n    ")])})),n("code",[t._v(t._s("/admin-api"+e.path))])],2)})),0)},c=[],u=(n("28a5"),n("768b")),l={name:"RouteShow",props:{data:Object},computed:{httpRoute:function(){var t=this,e=this.data.http_path;return e?e.map((function(e){var n=t.data.http_method,r=e;if(-1!==e.indexOf(":")){var a=e.split(":"),i=Object(u["a"])(a,2);n=i[0],r=i[1],n=n.split(",").filter((function(t){return!!t}))}return 0===n.length&&(n=["ANY"]),{method:n,path:r}})):[]}}},f=l,p=n("2877"),d=Object(p["a"])(f,s,c,!1,null,null,null),h=d.exports,m=n("1799"),b=n("38db"),g=n("d3fc"),v=n("0240"),y={name:"Index",components:{RowToEdit:v["a"],RowDestroy:g["a"],SearchForm:b["a"],Pagination:m["a"],RouteShow:h},data:function(){return{perms:[],page:null,searchForm:{},search:[{field:"id",label:"ID"},{field:"name",label:"名称"},{field:"slug",label:"标识"},{field:"http_path",label:"请求路径"}]}},watch:{$route:{handler:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["b"])(e.query);case 2:n=t.sent,r=n.data,a=r.data,i=r.meta,this.perms=a,this.page=i;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),immediate:!0}}},w=y,_=Object(p["a"])(w,r,a,!1,null,null,null);e["default"]=_.exports},d3fc:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pop-confirm",t._b({attrs:{type:"danger",confirm:t.onConfirm,size:"small"}},"pop-confirm",t.$attrs,!1),[t._t("default",[t._v("删除")])],2)},a=[],i=(n("96cf"),n("3b8d")),o=n("6fc0"),s=n("ff66"),c=n("90fe"),u=n("1614"),l={name:"RowDestroy",components:{PopConfirm:o["a"]},mixins:[u["a"]],methods:{onConfirm:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.checkResourceName(),this.setIdentify(),t.next=4,s["b"].delete("".concat(this.resource,"/").concat(this.identify));case 4:this.data.splice(this.getIndex(),1),this.$message.success(Object(c["h"])("destroyed"));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},f=l,p=n("2877"),d=Object(p["a"])(f,r,a,!1,null,null,null);e["a"]=d.exports},f42a:function(t,e,n){}}]);
//# sourceMappingURL=chunk-517108a3.f428fc0a.js.map