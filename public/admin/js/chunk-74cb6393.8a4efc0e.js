(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74cb6393"],{"04bc":function(t,e,r){"use strict";r("8e6e"),r("456d");var n=r("bd86"),i=r("75fc"),o=(r("a481"),r("96cf"),r("3b8d")),a=(r("ac6a"),r("28a5"),r("9948")),s=r.n(a),c=r("9b02"),u=r.n(c),l=r("fc8b"),f=r("90fe"),p=r("24a0");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(r,!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h,b,v={name:"LzForm",components:{FlexSpacer:p["a"]},inject:{view:{from:"view",default:null}},data:function(){return{loading:!1,stay:!1}},props:{getData:Function,submit:Function,errors:Object,form:Object,submitText:{type:String,default:"保存"},labelPosition:String,inDialog:Boolean,createdRedirect:{type:[String,Function],default:function(){var t=this.$route.path.split("/");return"/"+(t[t.length-2]||"")}},updatedRedirect:{type:[String,Function],default:function(){return this.$router.back.bind(this.$router)}},disableRedirect:Boolean,disableStay:Boolean,editMode:Boolean},computed:{realLabelPosition:function(){return this.labelPosition||(this.$store.state.miniWidth?"top":"right")},miniWidth:function(){return this.$store.state.miniWidth}},created:function(){this.copyMethods()},methods:{copyMethods:function(){var t=this;[l["default"].extends.methods,l["default"].methods].forEach((function(e){s()(e,(function(e,r){t[r]=function(){e.apply(this.$refs.form,arguments)}}))}))},_getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,this.view&&this.$emit("update:form",this.view.formBak),t.prev=2,t.t0=this.getData,!t.t0){t.next=7;break}return t.next=7,this.getData();case 7:this.$nextTick((function(){e.setInitialValues()})),t.next=13;break;case 10:t.prev=10,t.t1=t["catch"](2),Promise.reject(t.t1);case 13:this.loading=!1;case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));function e(){return t.apply(this,arguments)}return e}(),onSubmit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$emit("update:errors",{}),t.prev=1,t.t0=this.submit,!t.t0){t.next=6;break}return t.next=6,this.submit();case 6:if(this.$message.success(Object(f["h"])(this.editMode?"updated":"created")),!this.stay&&!this.disableRedirect){t.next=9;break}return t.abrupt("return");case 9:e=this.editMode?this.updatedRedirect:this.createdRedirect,"string"===typeof e?this.$router.push(e):"function"===typeof e&&e(),t.next=17;break;case 13:t.prev=13,t.t1=t["catch"](1),this.$emit("update:errors",Object(f["j"])(t.t1.response)),422!==u()(t.t1,"response.status")&&Promise.reject(t.t1);case 17:case"end":return t.stop()}}),t,this,[[1,13]])})));function e(){return t.apply(this,arguments)}return e}(),onReset:function(){this.$refs.form.resetFields()}},watch:{$route:{handler:function(){this.$active&&this._getData()},immediate:!0}},render:function(t){var e=this,r=this.$slots.default;Array.isArray(r)&&(r=r.map((function(r){var n=r.componentOptions,o=n.propsData,a=o.helper,s=o.label;if(a){a=a.replace(/\n/g,"<br>");var c=t("template",{slot:"label"},[t("span",[s]),t("el-tooltip",{attrs:{effect:"dark",placement:"top-start","popper-class":"form-helper-popper ".concat(e.miniWidth?"mini-width":"")}},[t("div",{slot:"content",domProps:{innerHTML:a}}),t("i",{class:"ml-1 el-icon-question helper"})])]);return t("el-form-item",{props:n.propsData},[c].concat(Object(i["a"])(n.children)))}return r})));var n=!this.disableStay&&t("el-checkbox",{attrs:{title:"表单提交后，留在此页"},model:{value:e.stay,callback:function(t){e.stay=t}}},["留在此页"]),o=this.$slots.footer||t("el-form-item",{class:"footer"},[t("loading-action",{attrs:{type:"primary",action:this.onSubmit}},[this.submitText]),t("el-button",{on:{click:this.onReset}},["重置"]),this.$slots.footerAppend,t("flex-spacer"),n]);return t("el-form",{props:m({model:this.form,errors:this.errors,labelPosition:this.realLabelPosition},this.$attrs),on:m({},this.$listeners),class:{"in-dialog":this.inDialog},style:{width:this.inDialog?"auto":"800px"},directives:[{name:"loading",value:this.loading}],ref:"form"},[r,o])}},g=v,x=(r("98bf"),r("2070"),r("2877")),y=Object(x["a"])(g,h,b,!1,null,"c3fdf812",null);e["a"]=y.exports},"0fab":function(t,e,r){"use strict";var n=r("ecb8"),i=r.n(n);i.a},2070:function(t,e,r){"use strict";var n=r("9016"),i=r.n(n);i.a},"3aaa":function(t,e,r){"use strict";r.d(e,"d",(function(){return i})),r.d(e,"f",(function(){return o})),r.d(e,"b",(function(){return a})),r.d(e,"g",(function(){return s})),r.d(e,"c",(function(){return c})),r.d(e,"h",(function(){return u})),r.d(e,"a",(function(){return l})),r.d(e,"e",(function(){return f}));var n=r("ff66");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("vue-routers",{params:t})}function o(t){return n["b"].post("vue-routers",t)}function a(t){return n["b"].delete("vue-routers/".concat(t))}function s(t,e){return n["b"].put("vue-routers/".concat(t),e)}function c(t){return n["b"].get("vue-routers/".concat(t,"/edit"))}function u(t){return n["b"].put("vue-routers",t)}function l(){return n["b"].get("vue-routers/create")}function f(t){return n["b"].post("vue-routers/by-import",t)}},"5a6d":function(t,e,r){},"7a7f":function(t,e,r){"use strict";var n=r("90fe");e["a"]={provide:function(){return{view:this}},data:function(){return{formField:"form",idField:"id"}},computed:{editMode:function(){return!!this.resourceId},resourceId:function(){return this.$route.params[this.idField]}},created:function(){this.backupForm()},methods:{getResourceId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return this.$route.params[t]},backupForm:function(){this.formBak=JSON.parse(JSON.stringify(this.$data[this.formField]))},fillForm:function(t){this.$data[this.formField]=Object(n["b"])(this.$data[this.formField],t)}}}},9016:function(t,e,r){},"98bf":function(t,e,r){"use strict";var n=r("5a6d"),i=r.n(n);i.a},aef5:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"a",(function(){return s}));var n=r("ff66");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("admin-permissions",{params:t})}function o(t){return n["b"].post("admin-permissions",t)}function a(t,e){return n["b"].put("admin-permissions/".concat(t),e)}function s(t){return n["b"].get("admin-permissions/".concat(t,"/edit"))}},c130:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",{staticClass:"create",scopedSlots:t._u([{key:"header",fn:function(){return[r("content-header")]},proxy:!0}])},[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("lz-form",{ref:"form",attrs:{"get-data":t.getData,submit:t.onSubmit,errors:t.errors,form:t.form,"edit-mode":t.editMode},on:{"update:errors":function(e){t.errors=e},"update:form":function(e){t.form=e}}},[r("el-form-item",{attrs:{label:"父级路由",prop:"parent_id"}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"一级"},model:{value:t.form.parent_id,callback:function(e){t.$set(t.form,"parent_id",e)},expression:"form.parent_id"}},t._l(t.vueRouterOptions,(function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}},[r("span",[t._v(t._s(e.text))])])})),1)],1),r("el-form-item",{attrs:{label:"标题",required:"",prop:"title"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"地址",prop:"path",helper:t.pathHelper}},[r("el-autocomplete",{staticClass:"w-100",attrs:{"fetch-suggestions":t.pathSearch,clearable:""},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1),r("el-form-item",{attrs:{label:"图标",prop:"icon"}},[r("el-input",{staticClass:"icon",model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}},[r("el-select",{attrs:{slot:"prepend",placeholder:"图标"},slot:"prepend",model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}},t._l(t.icons,(function(e){return r("el-option",{key:e,attrs:{label:"图标",value:e}},[r("svg-icon",{staticClass:"mr-2",attrs:{"icon-class":e}}),r("span",{staticClass:"fr"},[t._v(t._s(e))])],1)})),1),r("svg-icon",{attrs:{slot:"append","icon-class":t.form.icon||"cog-fill"},slot:"append"})],1)],1),r("el-form-item",{attrs:{label:"排序",prop:"order"}},[r("el-input-number",{attrs:{min:-9999,max:9999},model:{value:t.form.order,callback:function(e){t.$set(t.form,"order",e)},expression:"form.order"}})],1),r("el-form-item",{attrs:{label:"显示在菜单",prop:"menu"}},[r("el-switch",{attrs:{"active-text":"显示","inactive-text":"隐藏"},model:{value:t.form.menu,callback:function(e){t.$set(t.form,"menu",e)},expression:"form.menu"}})],1),r("el-form-item",{attrs:{label:"缓存",prop:"cache"}},[r("el-switch",{attrs:{"active-text":"缓存","inactive-text":"不缓存"},model:{value:t.form.cache,callback:function(e){t.$set(t.form,"cache",e)},expression:"form.cache"}})],1),r("el-form-item",{attrs:{label:"角色",prop:"roles"}},[r("el-select",{attrs:{multiple:"",placeholder:"选择角色",filterable:"",clearable:""},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}},t._l(t.roles,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"权限",prop:"permission"}},[r("el-select",{attrs:{placeholder:"选择权限",filterable:"",clearable:""},model:{value:t.form.permission,callback:function(e){t.$set(t.form,"permission",e)},expression:"form.permission"}},t._l(t.permissions,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.slug}})})),1)],1)],1)],1)],1)},i=[],o=(r("ac6a"),r("456d"),r("55dd"),r("96cf"),r("3b8d")),a=r("90fe"),s=r("3aaa"),c=r("04bc"),u=(r("fff0"),r("aef5"),r("7a7f")),l=r("985d"),f=r("c563"),p={name:"Form",components:{LzForm:c["a"]},mixins:[u["a"]],data:function(){return{form:{parent_id:0,title:"",path:"",icon:"",order:0,cache:!1,menu:!1,roles:[],permission:""},errors:{},vueRouters:[],roles:[],permissions:[],pathHelper:"地址可以有三种：\n1：以 http 开头的完整 url，会在新窗口中打开；\n2：以斜杠 '/' 开头的，不会匹配生成路由配置，\n一般用于打开其他路由的不同参数的 url；\n3：其他则会去匹配组件，并生成路由配置。"}},computed:{vueRouterOptions:function(){return Object(a["m"])(this.vueRouters)},icons:function(){return l["a"]}},created:function(){this.initPaths()},methods:{queryParentId:function(){var t=Object(a["s"])(this.$route.query.parent_id);return this.vueRouterOptions.some((function(e){return e.id===t}))?t:0},onSubmit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.editMode){t.next=5;break}return t.next=3,Object(s["g"])(this.resourceId,this.form);case 3:t.next=7;break;case 5:return t.next=7,Object(s["f"])(this.form);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.editMode){t.next=8;break}return t.next=3,Object(s["c"])(this.resourceId);case 3:r=t.sent,e=r.data,this.fillForm(e.vue_router),t.next=12;break;case 8:return t.next=10,Object(s["a"])();case 10:n=t.sent,e=n.data;case 12:this.vueRouters=e.vue_routers,!this.editMode&&(this.form.parent_id=this.queryParentId()),this.roles=e.roles,this.permissions=e.permissions;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initPaths:function(){this.paths=Object.keys(f["a"]).sort().map((function(t){return{value:t}}))},pathSearch:function(t,e){var r=t?this.paths.filter((function(e){return-1!==e.value.indexOf(t)})):this.paths;e(r)}}},d=p,m=(r("0fab"),r("2877")),h=Object(m["a"])(d,n,i,!1,null,null,null);e["default"]=h.exports},ecb8:function(t,e,r){},fff0:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return a})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return c}));var n=r("ff66");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n["b"].get("admin-roles",{params:t})}function o(t){return n["b"].post("admin-roles",t)}function a(t,e){return n["b"].put("admin-roles/".concat(t),e)}function s(t){return n["b"].get("admin-roles/".concat(t,"/edit"))}function c(){return n["b"].get("admin-roles/create")}}}]);
//# sourceMappingURL=chunk-74cb6393.8a4efc0e.js.map